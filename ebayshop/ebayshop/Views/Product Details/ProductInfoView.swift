//
//  ProductInfoView.swift
//  ebayshop
//
//  Created by Aditya Dhage on 12/7/23.
//

import SwiftUI
import SDWebImageSwiftUI

struct ProductInfoView: View {
    
    @State var itemDetails: EbayItemDetails?
    
    var body: some View {
        NavigationView {
            ScrollView {
                if let itemDetails = itemDetails {
                    VStack {
                        HStack {
                            AsyncImage(url: URL(string: itemDetails.Item.PictureURL[0])) { image in
                                image
                                    .resizable()
                                    .aspectRatio(contentMode: .fit)
                                    .frame(width: 250, height: 250)
                            } placeholder: {
                                Image(systemName: "photo")
                                    .resizable()
                                    .aspectRatio(contentMode: .fit)
                                    .frame(width: 250, height: 250)
                            }
                        }
                        
                        HStack {
                            VStack(alignment: .leading, spacing: 10, content: {
                                Text(itemDetails.Item.Title).font(.headline)
                                Text("$\(String(itemDetails.Item.CurrentPrice.Value))").foregroundColor(/*@START_MENU_TOKEN@*/.blue/*@END_MENU_TOKEN@*/).bold()
                                HStack{
                                    Image(systemName: "magnifyingglass")
                                    Text("Decription")
                                }
                                VStack {
                                    Divider()
                                    ForEach(itemDetails.Item.ItemSpecifics.NameValueList.indices, id: \.self) { index in
                                        let pair = itemDetails.Item.ItemSpecifics.NameValueList[index]
                                        HStack {
                                            Text(String(pair.Name))
                                                .frame(maxWidth: .infinity, alignment: .leading)
                                            Text(concatenatedString(from: pair.Value ))
                                            .frame(maxWidth: .infinity, alignment: .leading)
                                        }
                                        if index < itemDetails.Item.ItemSpecifics.NameValueList.count - 1 {
                                            Divider()
                                        }
                                    }
                                }
                            }).padding()
                        }
                    }
                }
            }.padding() }
    }
    
    func concatenatedString(from array: [String]) -> String {
            return array.joined(separator: ", ")
    }
}

#Preview {
    ProductInfoView(itemDetails: EbayItemDetails(Timestamp: "2023-12-08T06:00:53.865Z", Ack: "Success", Build: "1299_CORE_APILW_19146596_R1", Version: "1299", Item: ebayshop.EbayItem(BestOfferEnabled: false, Description: "<font rwr=\"1\" style=\"\"><div class=\"main-container\" style=\"border: 1px solid rgb(248, 248, 248); background-color: rgb(255, 255, 255); position: relative;\"><div class=\"header-bar\" style=\"font-family: Helvetica, Arial, Tahoma, sans-serif; font-size: 16px; color: rgba(0, 0, 0, 0.9); width: 819px; height: 101px; padding: 10px 0px; background-color: transparent; position: relative; inset: -1px auto auto 165px; text-align: center;\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<img src=\"https://i.ibb.co/98BS74d/Santa-Monica-Wireless-NEW-2021-LOGO-removebg-preview-550.png\" alt=\"Santa-Monica-Wireless-NEW-2021-LOGO-removebg-preview-550\" style=\"font-family: Arial; font-size: 14pt;\"></div><div class=\"content\" times=\"\" new=\"\" roman\";=\"\" padding:=\"\" 10px=\"\" 25px;=\"\" position:=\"\" relative;\"=\"\" style=\"\"><div class=\"product-title\" helvetica=\"\" neue\",=\"\" helvetica,=\"\" verdana,=\"\" sans-serif;=\"\" font-size:=\"\" 20px;=\"\" text-align:=\"\" center;=\"\" line-height:=\"\" normal;=\"\" text-rendering:=\"\" optimizelegibility;\"=\"\" style=\"text-align: center; position: relative; width: 1142px; inset: 0px auto auto 136px; height: 27px;\"><font color=\"#333333\" face=\"Arial\" size=\"5\"><span style=\"caret-color: rgb(51, 51, 51);\"><b><br></b></span></font></div><div class=\"product-title\" helvetica=\"\" neue\",=\"\" helvetica,=\"\" verdana,=\"\" sans-serif;=\"\" font-size:=\"\" 20px;=\"\" text-align:=\"\" center;=\"\" line-height:=\"\" normal;=\"\" text-rendering:=\"\" optimizelegibility;\"=\"\" style=\"text-align: center; position: relative; width: 1142px; inset: 0px auto auto 136px; height: 27px;\"><font color=\"#333333\" face=\"Arial\" size=\"5\"><span style=\"caret-color: rgb(51, 51, 51);\"><b>Apple iPhone 13 MINI - 128GB / 256GB - (FACTORY UNLOCKED)&nbsp;</b></span></font></div><div class=\"product-title\" helvetica=\"\" neue\",=\"\" helvetica,=\"\" verdana,=\"\" sans-serif;=\"\" font-size:=\"\" 20px;=\"\" text-align:=\"\" center;=\"\" line-height:=\"\" normal;=\"\" text-rendering:=\"\" optimizelegibility;\"=\"\" style=\"position: relative; width: 1142px; inset: 0px auto auto 136px; height: 27px;\"><font color=\"#333333\" face=\"Arial\" size=\"5\"><span style=\"caret-color: rgb(51, 51, 51);\"><b><br></b></span></font></div><div class=\"product-image\" style=\"font-family: Arial; text-align: center;\"><div style=\"font-family: Helvetica, Arial, Tahoma, sans-serif; text-align: left; max-width: 550px; height: 185px; margin: auto; width: 546px;\"><div class=\"titlebar\" helvetica=\"\" neue\",=\"\" helvetica,=\"\" verdana,=\"\" sans-serif;=\"\" margin-top:=\"\" 0px;=\"\" clear:=\"\" both;\"=\"\" style=\"font-size: 16px; color: rgb(255, 255, 255); background-color: rgb(1, 120, 160); text-align: center; padding: 10px 25px;\">Cosmetic Condition</div><div class=\"product-description\" style=\"max-width: 550px; height: auto; padding: 25px; margin: auto; box-shadow: rgb(221, 221, 221) 3px 3px 3px 3px; clear: both; text-rendering: optimizelegibility; font-family: sans-serif; line-height: 1.5;\"><h1 helvetica=\"\" neue\",=\"\" arial,=\"\" sans-serif;\"=\"\" style=\"font-family: Times; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; margin: 25px 0px 10px; padding: 0px; border: 0px; outline: 0px; vertical-align: baseline; line-height: 1.2;\"><ul style=\"\"><li style=\"font-size: 14pt; color: rgb(66, 66, 66);\"><font size=\"4\">BRAND NEW SEALED IN BOX.</font></li><li style=\"font-size: 14pt;\"><font size=\"4\" style=\"\" color=\"#0039f3\"><u>ONE YEAR CPS CENTRAL WARRANTY.</u></font></li><li style=\"font-size: 14pt; color: rgb(66, 66, 66);\"><font size=\"4\">No Manufacturer warranty is included.</font></li></ul></h1></div></div><div style=\"font-size: medium; text-align: left; max-width: 550px; height: auto; margin: auto;\"><div class=\"titlebar\" helvetica=\"\" neue\",=\"\" helvetica,=\"\" verdana,=\"\" sans-serif;=\"\" font-size:=\"\" 16px;=\"\" font-weight:=\"\" bold;=\"\" background-color:=\"\" rgb(1,=\"\" 120,=\"\" 160);=\"\" text-align:=\"\" center;=\"\" padding:=\"\" 10px=\"\" 25px;=\"\" margin-top:=\"\" 0px;=\"\" clear:=\"\" both;\"=\"\" style=\"color: rgb(255, 255, 255);\"><br class=\"Apple-interchange-newline\"><br></div></div></div><div class=\"product-image\" style=\"font-family: Arial; font-size: 14pt; text-align: center;\"><br></div><div class=\"product-image\" style=\"font-family: Arial; font-size: 14pt; text-align: center;\"><br></div></div><div style=\"font-family: Helvetica, Arial, Tahoma, sans-serif; font-size: 16px; color: rgba(0, 0, 0, 0.9); max-width: 550px; height: auto; margin: auto;\"><div class=\"titlebar\" helvetica=\"\" neue\",=\"\" helvetica,=\"\" verdana,=\"\" sans-serif;=\"\" font-weight:=\"\" bold;=\"\" margin-top:=\"\" 0px;=\"\" clear:=\"\" both;\"=\"\" style=\"background-color: rgb(1, 120, 160); color: rgb(255, 255, 255); text-align: center; padding: 10px 25px;\">Compatibility</div><div class=\"product-description\" style=\"max-width: 550px; height: auto; padding: 25px; margin: auto; box-shadow: rgb(221, 221, 221) 3px 3px 3px 3px; clear: both; text-rendering: optimizeLegibility; font-family: sans-serif; line-height: 1.5; text-align: center;\"><span class=\"Apple-tab-span\" style=\"font-weight: inherit; white-space: pre;\"></span><p style=\"padding-right: 3px; padding-left: 3px; color: rgb(0, 0, 0); font-family: Arial; font-weight: 700;\">This is a Dual Band FACTORY UNLOCKED Phone which means it works on CDMA &amp; GSM Bands. CDMA will work on VERIZON only and GSM it works on AT&amp;T / T-Mobile and all other GSM Networks Worldwide.&nbsp;</p><p style=\"padding-right: 3px; padding-left: 3px; color: rgb(0, 0, 0); font-family: Arial; font-weight: 700;\">This phone is&nbsp;<font color=\"#ff0010\"><u>NOT</u>&nbsp;</font>Compatible with SPRINT, BOOST MOBILE, XFINITY or Ting Wireless.<span style=\"background-color: initial; font-size: x-large;\">&nbsp;<br></span>Buyer is responsible to check with their Cell Phone Provider to Make sure what band they use.&nbsp;</p><p style=\"padding-right: 3px; padding-left: 3px; color: rgb(0, 0, 0); font-family: Arial; font-weight: 700;\"><img src=\"https://image.ibb.co/fXiYa6/Verizon_Logo.jpg\" alt=\"\" width=\"160\" height=\"36\"><img src=\"https://image.ibb.co/e65eF6/Unlocked_logo.jpg\" alt=\"\" width=\"150\" height=\"59\"><br><img src=\"https://image.ibb.co/dJAeF6/t_mobile_logo.jpg\" alt=\"\" width=\"150\" height=\"35\"><img src=\"https://image.ibb.co/d4aeF6/AT_T_logo.jpg\" alt=\"\" width=\"150\" height=\"61\"></p></div></div><div class=\"product-features\" style=\"font-family: Arial; font-size: 14pt; padding: 25px; line-height: 1.5;\"><span style=\"font-family: sans-serif; font-size: 16px; font-weight: bold;\"><span style=\"font-size: 18pt;\">What\'s Included:</span></span><ul style=\"\"><li style=\"\"><font face=\"sans-serif\">Apple iPhone 13 <b>MINI </b>- 128GB / 256GB / 512GB (FACTORY UNLOCKED)&nbsp;</font></li><li style=\"font-family: Arial;\"><font face=\"sans-serif\">Sync Cable</font></li><li style=\"font-family: Arial;\">Sim Card is <b>NOT </b>included</li></ul></div></div><div class=\"titlebar\" helvetica=\"\" neue\",=\"\" helvetica,=\"\" verdana,=\"\" sans-serif;=\"\" font-size:=\"\" 16px;=\"\" font-weight:=\"\" inherit;=\"\" margin-top:=\"\" 30px;=\"\" clear:=\"\" both;\"=\"\" style=\"font-family: &quot;Times New Roman&quot;; font-size: medium; background-color: rgb(1, 120, 160); color: rgb(255, 255, 255); padding: 10px 25px;\">Shipping</div><div class=\"shipping\" style=\"font-family: &quot;Times New Roman&quot;; font-size: medium; padding: 25px; line-height: normal; overflow: hidden; text-rendering: optimizelegibility; background-color: rgb(255, 255, 255); width: 810.011px; height: 170.011px;\"><div style=\"text-align: right;\"><img src=\"https://i.ibb.co/M52hGm1/fast-shipping-logoo-195-removebg-preview.png\" alt=\"fast-shipping-logoo-195-removebg-preview\" style=\"color: rgb(51, 51, 51);\"></div><span helvetica=\"\" neue\",=\"\" helvetica,=\"\" verdana,=\"\" sans-serif;=\"\" font-size:=\"\" 18px;=\"\" font-weight:=\"\" normal;\"=\"\" style=\"color: rgb(51, 51, 51);\">We offer&nbsp;</span><span helvetica=\"\" neue\",=\"\" helvetica,=\"\" verdana,=\"\" sans-serif;=\"\" font-size:=\"\" 18px;=\"\" font-weight:=\"\" bold;\"=\"\" style=\"color: rgb(51, 51, 51);\">FREE</span><span helvetica=\"\" neue\",=\"\" helvetica,=\"\" verdana,=\"\" sans-serif;=\"\" font-size:=\"\" 18px;=\"\" font-weight:=\"\" normal;\"=\"\" style=\"color: rgb(51, 51, 51);\">&nbsp;</span><span helvetica=\"\" neue\",=\"\" helvetica,=\"\" verdana,=\"\" sans-serif;=\"\" font-size:=\"\" 18px;=\"\" font-weight:=\"\" 700;\"=\"\" style=\"color: rgb(51, 51, 51);\">SHIPPING</span><span helvetica=\"\" neue\",=\"\" helvetica,=\"\" verdana,=\"\" sans-serif;=\"\" font-size:=\"\" 18px;=\"\" font-weight:=\"\" normal;\"=\"\" style=\"color: rgb(51, 51, 51);\">&nbsp;and&nbsp;ONE&nbsp;</span><span helvetica=\"\" neue\",=\"\" helvetica,=\"\" verdana,=\"\" sans-serif;=\"\" font-size:=\"\" 18px;=\"\" font-weight:=\"\" inherit;\"=\"\" style=\"color: rgb(51, 51, 51);\">DAY handling time</span><span helvetica=\"\" neue\",=\"\" helvetica,=\"\" verdana,=\"\" sans-serif;=\"\" font-size:=\"\" 18px;=\"\" font-weight:=\"\" normal;\"=\"\" style=\"color: rgb(51, 51, 51);\">!&nbsp;</span><span helvetica=\"\" neue\",=\"\" helvetica,=\"\" verdana,=\"\" sans-serif;=\"\" font-size:=\"\" 18px;\"=\"\" style=\"color: rgb(51, 51, 51);\">We process and ship orders every business day, Monday through Friday, from our California shipping facility. We do not ship on weekends or holidays. Any order placed on Friday, Saturday or Sunday will ship Monday morning. At this time. Please be sure to provide us with an accurate physical address. Failure to provide an accurate physical address will result in a delay in your shipment.</span></div><div class=\"titlebar\" helvetica=\"\" neue\",=\"\" helvetica,=\"\" verdana,=\"\" sans-serif;=\"\" font-size:=\"\" 16px;=\"\" font-weight:=\"\" inherit;=\"\" margin-top:=\"\" 30px;=\"\" clear:=\"\" both;\"=\"\" style=\"font-family: &quot;Times New Roman&quot;; font-size: medium; background-color: rgb(1, 120, 160); color: rgb(255, 255, 255); padding: 10px 25px;\">Return Policy</div><div class=\"returns\" helvetica=\"\" neue\",=\"\" helvetica,=\"\" verdana,=\"\" sans-serif;=\"\" overflow:=\"\" hidden;=\"\" text-rendering:=\"\" optimizelegibility;=\"\" background-color:=\"\" rgb(255,=\"\" 255,=\"\" 255);=\"\" position:=\"\" relative;\"=\"\" style=\"font-family: &quot;Times New Roman&quot;; font-size: 20px; padding: 25px; color: rgb(51, 51, 51); line-height: normal;\"><div style=\"text-align: center;\"><img src=\"https://i.ibb.co/khNg8Z0/30-days-return-logo-175.png\" alt=\"30-days-return-logo-175\"></div><span style=\"font-weight: inherit;\">We want all of our customers to be satisfied with their items. We inspect and fully test each item that we sell&nbsp;</span>(except New items).<span style=\"font-weight: inherit;\">&nbsp;Don\'t worry, we\'re here to help. We encourage our customers to inspect their items physical and functional condition upon receipt to ensure that it conforms to the description of the item purchased and let us know in the first 3 days. All returns require a&nbsp;</span><span style=\"font-weight: bold; text-decoration-line: underline;\">Return Merchandise Authorization Number</span><span style=\"font-weight: inherit;\">&nbsp;(RMA#). Please contact us to receive your RMA # before returning an item. Please note that unauthorized returns will not be accepted. Once approved for a return, you will receive an email with return instructions and in some cases, a prepaid return label. Please note that: All returns will be inspected prior to a refund being issued. Items that are altered in any way (including locking of unlocked phones) will not be accepted Buyers who simply do not want their item or bought the wrong item are responsible for return shipping and a 15% restocking fee. Refunds will be issued within 3-5 business days of receipt of the item.</span></div><div class=\"titlebar\" helvetica=\"\" neue\",=\"\" helvetica,=\"\" verdana,=\"\" sans-serif;=\"\" font-size:=\"\" 16px;=\"\" font-weight:=\"\" inherit;=\"\" margin-top:=\"\" 30px;=\"\" clear:=\"\" both;\"=\"\" style=\"font-family: &quot;Times New Roman&quot;; font-size: medium; background-color: rgb(1, 120, 160); color: rgb(255, 255, 255); padding: 10px 25px;\">Contact Us</div><div class=\"contact\" helvetica=\"\" neue\",=\"\" helvetica,=\"\" verdana,=\"\" sans-serif;=\"\" overflow:=\"\" hidden;=\"\" text-rendering:=\"\" optimizelegibility;=\"\" font-weight:=\"\" inherit;=\"\" background-color:=\"\" rgb(255,=\"\" 255,=\"\" 255);\"=\"\" style=\"font-family: &quot;Times New Roman&quot;; font-size: 20px; padding: 25px; color: rgb(51, 51, 51); line-height: normal;\"><div style=\"text-align: center;\"><img src=\"https://i.ibb.co/m0MJZv8/contact-us-logo-1-removebg-preview.png\" alt=\"contact-us-logo-1-removebg-preview\"></div><div>Please E-Mail / Message us through eBay messaging system with any concern, issue or questions and we will be more than happy to help you in 24-48 hours.</div></div></font>", ItemID: "225494721576", EndTime: "2023-12-25T02:48:48.000Z", StartTime: "2023-03-25T01:48:48.000Z", ViewItemURLForNaturalSearch: "https://www.ebay.com/itm/Apple-iPhone-13-MINI-128GB-256GB-UNLOCKED-100-BATTERY-SEALED-/225494721576?var=", ListingType: "FixedPriceItem", Location: "Los Angeles, California", PaymentMethods: [], PictureURL: ["https://i.ebayimg.com/00/s/MTUyOFgxNjAw/z/q44AAOSwYQpkHlBJ/$_57.JPG?set_id=8800005007", "https://i.ebayimg.com/00/s/MTYwMFgxMTk4/z/TC8AAOSwlQJkHlFn/$_57.JPG?set_id=8800005007", "https://i.ebayimg.com/00/s/NjQwWDQ3MQ==/z/uQ4AAOSwSd1kHlFl/$_57.JPG?set_id=8800005007", "https://i.ebayimg.com/00/s/NjQwWDQ3OQ==/z/6PEAAOSwKrFkHlFn/$_57.JPG?set_id=8800005007", "https://i.ebayimg.com/00/s/NjQwWDQ3MQ==/z/6bsAAOSww59kHlFm/$_57.JPG?set_id=8800005007", "https://i.ebayimg.com/00/s/NjQwWDQ3OQ==/z/Kr4AAOSwSTpkHlFm/$_57.JPG?set_id=8800005007"], PostalCode: "900**", PrimaryCategoryID: "9355", PrimaryCategoryName: "Cell Phones & Accessories:Cell Phones & Smartphones", Quantity: 314, Seller: ebayshop.EbaySeller(UserID: "santamonicawireless", FeedbackRatingStar: "TurquoiseShooting", FeedbackScore: 29940, PositiveFeedbackPercent: 99.3, TopRatedSeller: true), BidCount: 0, ConvertedCurrentPrice: ebayshop.EbayPrice(Value: 639.95, CurrencyID: "USD"), CurrentPrice: ebayshop.EbayPrice(Value: 639.95, CurrencyID: "USD"), ListingStatus: "Active", QuantitySold: 299, ShipToLocations: ["US"], Site: "US", TimeLeft: "P16DT20H47M55S", Title: "Apple iPhone 13 MINI - 128GB 256GB (UNLOCKED)  ðŸ”‹100% BATTERYðŸ”‹  âš«âšªðŸ”´ðŸ”µ âœ¤SEALEDâœ¤", ItemSpecifics: ebayshop.EbayItemSpecifics(NameValueList: [ebayshop.EbayNameValue(Name: "Processor", Value: ["A15"]), ebayshop.EbayNameValue(Name: "Screen Size", Value: ["5.42 in"]), ebayshop.EbayNameValue(Name: "Manufacturer Color", Value: ["Multiple"]), ebayshop.EbayNameValue(Name: "Lock Status", Value: ["Factory Unlocked"]), ebayshop.EbayNameValue(Name: "SIM Card Slot", Value: ["Single SIM"]), ebayshop.EbayNameValue(Name: "Brand", Value: ["Apple"]), ebayshop.EbayNameValue(Name: "Network", Value: ["FACTORY UNLOCKED", "METROPCS", "AT&T", "Cricket Wireless", "SIMPLE Mobile", "Spectrum", "T-Mobile", "Verizon"]), ebayshop.EbayNameValue(Name: "Model", Value: ["Apple iPhone 13 MINI"]), ebayshop.EbayNameValue(Name: "Connectivity", Value: ["5G", "Bluetooth", "GPS"]), ebayshop.EbayNameValue(Name: "Operating System", Value: ["iOS"]), ebayshop.EbayNameValue(Name: "Features", Value: ["3D Depth Camera", "4K Video Recording"]), ebayshop.EbayNameValue(Name: "Storage Capacity", Value: ["128 GB / 256 GB"]), ebayshop.EbayNameValue(Name: "Contract", Value: ["Without Contract"]), ebayshop.EbayNameValue(Name: "Camera Resolution", Value: ["Dual 12MP Camera"]), ebayshop.EbayNameValue(Name: "RAM", Value: ["4 GB"])]), Subtitle: "âœ… FREE 2-DAYðŸš€ âœ… 1 YEAR WARRANTY âœ…GSM+CDMAâœ… ALL COLORS", PrimaryCategoryIDPath: "15032:9355", Storefront: ebayshop.EbayStorefront(StoreURL: "https://www.ebay.com/str/santamonicawireless", StoreName: "Santa Monica Wireless"), Country: "US", ReturnPolicy: ebayshop.EbayReturnPolicy(Refund: "Money back or replacement (buyer\'s choice)", ReturnsWithin: "30 Days", ReturnsAccepted: "Returns Accepted", ShippingCostPaidBy: "Seller", InternationalRefund: "MoneyBack", InternationalReturnsWithin: "30 Days", InternationalReturnsAccepted: "ReturnsAccepted", InternationalShippingCostPaidBy: "Buyer"), AutoPay: true, PaymentAllowedSite: [], IntegratedMerchantCreditCardEnabled: false, HandlingTime: 1, ConditionID: 1000, ConditionDisplayName: "New", QuantityAvailableHint: "MoreThan", QuantityThreshold: 10, ExcludeShipToLocation: ["US Protectorates", "APO/FPO"], TopRatedListing: true, GlobalShipping: false, QuantitySoldByPickupInStore: 0, NewBestOffer: false)))
}
